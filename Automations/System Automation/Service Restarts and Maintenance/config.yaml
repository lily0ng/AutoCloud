# Service Monitor Configuration

# Global settings
check_interval: 60  # seconds between service checks

# Notification settings
notifications:
  email:
    enabled: true
    smtp_server: smtp.gmail.com
    smtp_port: 587
    use_tls: true
    from: "monitor@yourdomain.com"
    to: "admin@yourdomain.com"
    username: ""  # Add your email username
    password: ""  # Add your email password or app-specific password

# Service definitions
services:
  - name: nginx
    description: "Nginx Web Server"
    max_restarts: 3
    restart_window: 3600  # 1 hour
    dependencies:
      - name: php-fpm
        required: true

  - name: mysql
    description: "MySQL Database"
    max_restarts: 2
    restart_window: 1800  # 30 minutes
    health_check:
      type: "tcp"
      port: 3306

  - name: redis
    description: "Redis Cache"
    max_restarts: 5
    restart_window: 3600
    health_check:
      type: "tcp"
      port: 6379

  - name: postgresql
    description: "PostgreSQL Database"
    max_restarts: 2
    restart_window: 1800
    health_check:
      type: "tcp"
      port: 5432

  - name: mongodb
    description: "MongoDB Database"
    max_restarts: 3
    restart_window: 3600
    health_check:
      type: "tcp"
      port: 27017

  - name: rabbitmq
    description: "RabbitMQ Message Broker"
    max_restarts: 3
    restart_window: 3600
    health_check:
      type: "tcp"
      port: 5672

# Maintenance windows
maintenance_windows:
  - day: "Sunday"
    start_time: "02:00"
    duration: 120  # minutes
    services:
      - nginx
      - mysql
      - redis

# Logging configuration
logging:
  level: INFO
  max_size: 10485760  # 10MB
  backup_count: 5
  log_dir: "/var/log/service-monitor"
