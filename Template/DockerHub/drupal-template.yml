---
# Drupal Content Management Template
version: '3.8'
services:
  drupal:
    image: drupal:10-apache
    restart: always
    ports: ["80:80"]
    environment:
      DRUPAL_DATABASE_HOST: mysql
      DRUPAL_DATABASE_NAME: drupal
      DRUPAL_DATABASE_USERNAME: drupal
      DRUPAL_DATABASE_PASSWORD: ${DB_PASSWORD:-drupalpass}
    volumes: [drupal_modules:/var/www/html/modules, drupal_profiles:/var/www/html/profiles, drupal_themes:/var/www/html/themes, drupal_sites:/var/www/html/sites]
    depends_on: [mysql]
  mysql:
    image: mysql:8.0
    restart: always
    environment:
      MYSQL_DATABASE: drupal
      MYSQL_USER: drupal
      MYSQL_PASSWORD: ${DB_PASSWORD:-drupalpass}
      MYSQL_ROOT_PASSWORD: ${ROOT_PASSWORD:-rootpass}
    volumes: [mysql_data:/var/lib/mysql]
volumes:
  drupal_modules:
  drupal_profiles:
  drupal_themes:
  drupal_sites:
  mysql_data:
