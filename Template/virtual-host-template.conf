# Virtual Host Template for Apache/Nginx

# Apache Virtual Host
<VirtualHost *:80>
    ServerName example.com
    ServerAlias www.example.com
    DocumentRoot /var/www/example.com/public
    
    <Directory /var/www/example.com/public>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
    
    ErrorLog ${APACHE_LOG_DIR}/example.com-error.log
    CustomLog ${APACHE_LOG_DIR}/example.com-access.log combined
    
    RewriteEngine On
    RewriteCond %{HTTPS} off
    RewriteRule ^(.*)$ https://%{HTTP_HOST}$1 [R=301,L]
</VirtualHost>

<VirtualHost *:443>
    ServerName example.com
    ServerAlias www.example.com
    DocumentRoot /var/www/example.com/public
    
    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/example.com.crt
    SSLCertificateKeyFile /etc/ssl/private/example.com.key
    SSLCertificateChainFile /etc/ssl/certs/example.com-chain.crt
    
    <Directory /var/www/example.com/public>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
    
    ErrorLog ${APACHE_LOG_DIR}/example.com-ssl-error.log
    CustomLog ${APACHE_LOG_DIR}/example.com-ssl-access.log combined
</VirtualHost>

# Nginx Virtual Host
# server {
#     listen 80;
#     listen [::]:80;
#     server_name example.com www.example.com;
#     return 301 https://$server_name$request_uri;
# }
#
# server {
#     listen 443 ssl http2;
#     listen [::]:443 ssl http2;
#     server_name example.com www.example.com;
#     
#     root /var/www/example.com/public;
#     index index.html index.htm index.php;
#     
#     ssl_certificate /etc/ssl/certs/example.com.crt;
#     ssl_certificate_key /etc/ssl/private/example.com.key;
#     
#     access_log /var/log/nginx/example.com-access.log;
#     error_log /var/log/nginx/example.com-error.log;
#     
#     location / {
#         try_files $uri $uri/ /index.php?$query_string;
#     }
#     
#     location ~ \.php$ {
#         fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;
#         fastcgi_index index.php;
#         include fastcgi_params;
#     }
# }
