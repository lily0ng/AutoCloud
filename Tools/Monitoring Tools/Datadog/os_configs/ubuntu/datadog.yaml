# Ubuntu-specific Datadog Agent Configuration
api_key: "<YOUR_DATADOG_API_KEY>"
site: "datadoghq.com"

# Ubuntu System Monitoring
logs_enabled: true
logs_config:
  processing_rules:
    - type: mask_sequences
      name: "mask_credentials"
      pattern: "(password|secret|key)(['\"]:\s*['\"])\w+"
      replacement: "\\1\\2*****"
  logs_dd_url: "intake.logs.datadoghq.com"
  logs_no_ssl: false
  container_collect_all: true

# Ubuntu-specific log collection
logs:
  - type: file
    path: /var/log/syslog
    service: ubuntu-system
    source: syslog
  - type: file
    path: /var/log/auth.log
    service: ubuntu-auth
    source: auth
  - type: file
    path: /var/log/dpkg.log
    service: ubuntu-packages
    source: dpkg

# Process monitoring
process_config:
  enabled: true
  intervals:
    process_realtime: 10
    process: 30

# Ubuntu-specific checks
auto_conf_images: true
container_include:
  - "image:ubuntu"
  - "image:canonical/*"

# APM for Ubuntu services
apm_config:
  enabled: true
  env: production
  apm_dd_url: "trace.agent.datadoghq.com"

# System Probe for Ubuntu
system_probe_config:
  enabled: true
  sysprobe_socket: /sys/kernel/debug/tracing
  enable_tcp_monitoring: true
  enable_udp_monitoring: true
  
# Ubuntu-specific integrations
integrations:
  systemd:
    init_config:
    instances:
      - unit_names:
          - ssh.service
          - ufw.service
          - networkd.service
          - systemd-resolved.service
