# Debian Apache Proxy Configuration

# Enable Proxy Modules
<IfModule mod_proxy.c>
    ProxyRequests Off
    ProxyPreserveHost On
    
    # Security Configuration
    <Proxy *>
        Require all granted
    </Proxy>

    # Application 1 - Web App
    ProxyPass /app1 http://localhost:3000
    ProxyPassReverse /app1 http://localhost:3000

    # Application 2 - API Service
    ProxyPass /api http://localhost:8080/api
    ProxyPassReverse /api http://localhost:8080/api

    # Application 3 - Secure Service
    <Location /secure>
        ProxyPass https://localhost:8443
        ProxyPassReverse https://localhost:8443
        SSLRequireSSL
    </Location>

    # Load Balancer Configuration
    <Proxy "balancer://mycluster">
        BalancerMember "http://localhost:8081"
        BalancerMember "http://localhost:8082"
        ProxySet lbmethod=byrequests
    </Proxy>

    # Error Documents
    ProxyErrorOverride On
    ErrorDocument 500 /custom_error.html
    ErrorDocument 502 /custom_error.html
    ErrorDocument 503 /custom_error.html
    ErrorDocument 504 /custom_error.html

    # Timeout Settings
    ProxyTimeout 300
    ProxyBadHeader Ignore
</IfModule>

# SSL Proxy Engine Configuration
<IfModule mod_ssl.c>
    SSLProxyEngine on
    SSLProxyVerify none
    SSLProxyCheckPeerCN off
    SSLProxyCheckPeerName off
</IfModule>
